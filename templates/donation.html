{% extends "base4.html" %}
{% block title %}VegeGrove - Donation Page{% endblock %}

{% block content %}
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/donation.css') }}">

<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="/">VegeGrove</a>
        </div>
        <ul class="nav navbar-nav">
            <li><a href="{{url_for('main.landingpage')}}">Home</a></li>
            <li><a href="{{url_for('donation')}}">Donations</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="{{url_for('auth.signup')}}"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
            <li><a href="{{ url_for('auth.login')}}"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
        </ul>
    </div>
</nav>

<div class="donation-container">
    <h1 class="title">Help us reach our goal by donating now!</h1>
    <!-- Donation progress bar -->
    <div class="progress-bg">
        <div class="progress-bar">40%</div>
        <p class="raised">$400 raised out of $1000 goal</p>
    </div>
    <!-- Donation amount options -->
    <div class="donation-options">
        <div class="options">
            <!-- Predefined donation amounts -->
            <button onclick="donateAmount(10)" class="option-btn">$10</button>
            <button onclick="donateAmount(20)" class="option-btn">$20</button>
            <button onclick="donateAmount(40)" class="option-btn">$40</button>
            <button onclick="donateAmount(50)" class="option-btn">$50</button>
            <button onclick="donateAmount(80)" class="option-btn">$80</button>
            <button onclick="donateAmount(100)" class="option-btn">$100</button>

            <!-- User-defined donation amount -->
            <input type="number" id="customAmount" class="custom-btn" min="1">
            <button onclick="donateCustomAmount()" class="donate-btn">Donate</button>
        </div>
    </div>
</div>

<script>
    // Donation amount
    function donateAmount(amount){
        document.getElementById('customAmount').value = amount;
    }

    function donateCustomAmount(){
        var customAmount = document.getElementById('customAmount').value;

        if (customAmount && !isNaN(customAmount) && parseInt(customAmount) > 0){
            // Confirmation alert
            var confirmDonation = confirm('Are you sure that you want to donate $' + customAmount + '?');

            if (confirmDonation){
                // Clicking on "OK" redirects to the checkout page + passes customAmount
                window.location.href = '/checkout?amount=' + customAmount;
            } else{
                alert('Donation cancelled.');
            }
        } else{
            alert('Please enter a valid donation amount.')
        }
    }
</script>
{% endblock %}